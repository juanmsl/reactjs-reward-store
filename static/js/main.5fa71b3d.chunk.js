(this["webpackJsonpreward-store"]=this["webpackJsonpreward-store"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"UsersHOC",(function(){return Z})),a.d(n,"ProductsHOC",(function(){return W})),a.d(n,"FiltersHOC",(function(){return K}));var r=a(0),c=a.n(r),s=a(13),o=a.n(s),i=a(9),u=a(10),l=a(31),m=a(6),d={STANDBY:"FETCH_STANDBY",PROGRESS:"FETCHING",SUCCESS:"FETCH_SUCCESS",FAILED:"FETCH_FAILED",ALL:["FETCH_STANDBY","FETCHING","FETCH_SUCCESS","FETCH_FAILED"]},p=a(1),h=a(12),f=a.n(h),E=function e(){Object(p.a)(this,e)};E.apiURL="https://coding-challenge-api.aerolab.co",E.timeout=15e3,E.commonHeaders=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1YTBjOWIxNmU0OTYwMDAwNjBkMDBhNjgiLCJpYXQiOjE1MTA3NzU1NzR9.3RXwYx0ehfQKYZfZ2XRcDr-jbSwmZI50T1l921fbU4E"}},E.defaultCB=function(){},E.getUser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.defaultCB,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.defaultCB;f()({url:"/user/me",method:"GET",baseURL:E.apiURL,timeout:E.timeout,headers:E.commonHeaders(),credentials:"same-origin"}).then((function(t){return e(t)})).catch((function(e){return t(e)})).then(a())},E.addPoints=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.defaultCB,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E.defaultCB;f()({url:"/user/points",method:"POST",baseURL:E.apiURL,timeout:E.timeout,headers:E.commonHeaders(),credentials:"same-origin",data:{amount:e}}).then((function(e){return t(e)})).catch((function(e){return a(e)})).then(n())},E.getHistory=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.defaultCB,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.defaultCB;f()({url:"/user/history",method:"GET",baseURL:E.apiURL,timeout:E.timeout,headers:E.commonHeaders(),credentials:"same-origin"}).then((function(t){return e(t)})).catch((function(e){return t(e)})).then(a())},E.redeem=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.defaultCB,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E.defaultCB;f()({url:"/redeem",method:"POST",baseURL:E.apiURL,timeout:E.timeout,headers:E.commonHeaders(),credentials:"same-origin",data:{productId:e}}).then((function(e){return t(e)})).catch((function(e){return a(e)})).then(n())},E.getProducts=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.defaultCB,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.defaultCB;f()({url:"/products",method:"GET",baseURL:E.apiURL,timeout:E.timeout,headers:E.commonHeaders(),credentials:"same-origin"}).then((function(t){return e(t)})).catch((function(e){return t(e)})).then(a())};var b={status:d.STANDBY,error:null,username:null,points:0,history:[],statusPoints:d.STANDBY,messagePoints:null},O="USERS/GET_REQUEST",g="USERS/GET_SUCCESS",y="USERS/GET_FAILURE",v="USERS/UPDATE_POINTS_REQUEST",C="USERS/UPDATE_POINTS_SUCCESS",S="USERS/UPDATE_POINTS_FAILURE",j="USERS/RESET_MESSAGE_POINTS",R="USERS/GET_HISTORY",N={getUser:function(){return function(e){e({type:O}),E.getUser((function(t){e({type:g,payload:t.data})}),(function(t){e({type:y,payload:t.message})}))}},addPoints:function(e){return function(t){t({type:v}),E.addPoints(e,(function(e){t({type:C,payload:e.data})}),(function(e){t({type:S,payload:e.response.data.error})}))}},getHistory:function(){return function(e){E.getHistory((function(t){e({type:R,payload:t.data})}),(function(t){e({type:R,payload:[]})}))}},resetMessagePoints:function(){return function(e){e({type:j})}}},P={products:[],status:d.STANDBY,error:null,messageRedeem:null,statusRedeem:d.STANDBY},U="PRODUCTS/GET_REQUEST",T="PRODUCTS/GET_SUCCESS",D="PRODUCTS/GET_FAILURE",A="PRODUCTS/REDEEM_REQUEST",B="PRODUCTS/REDEEM_SUCCESS",_="PRODUCTS/REDEEM_FAILURE",k="PRODUCTS/RESET_MESSAGE_REDEEM",F={getProducts:function(){return function(e){e({type:U}),E.getProducts((function(t){e({type:T,payload:t.data})}),(function(t){e({type:D,payload:t.message})}))}},redeemProduct:function(e){return function(t){t({type:A}),E.redeem(e,(function(e){t(N.getUser()),t({type:B,payload:e.data.message})}),(function(e){t({type:_,payload:e.response.data.error})}))}},resetMessageRedeem:function(){return function(e){e({type:k})}}},H={orderByOptions:[{value:"name/ASC",label:"Name"},{value:"cost/ASC",label:"Lowest Cost"},{value:"cost/DSC",label:"Highest Cost"}],orderBy:"name/ASC",name:""},I="FILTERS/SET_NAME",L="FILTERS/SET_ORDER_BY",w={setName:function(e){return function(t){t({type:I,payload:e})}},setOrderBy:function(e){return function(t){t({type:L,payload:e})}}},G={products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(m.a)({},e,{status:d.PROGRESS,error:P.error});case T:return Object(m.a)({},e,{status:d.SUCCESS,products:t.payload});case D:return Object(m.a)({},e,{status:d.FAILED,error:t.payload});case A:return Object(m.a)({},e,{statusRedeem:d.PROGRESS,messageRedeem:"Redeem in progress..."});case B:return Object(m.a)({},e,{statusRedeem:d.SUCCESS,messageRedeem:t.payload});case _:return Object(m.a)({},e,{statusRedeem:d.FAILED,messageRedeem:t.payload});case k:return Object(m.a)({},e,{statusRedeem:d.STANDBY,messageRedeem:P.messageRedeem});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(m.a)({},e,{status:d.PROGRESS});case g:return Object(m.a)({},e,{status:d.SUCCESS,username:t.payload.name,points:t.payload.points,history:t.payload.redeemHistory});case y:return Object(m.a)({},e,{status:d.FAILED,error:t.payload});case v:return Object(m.a)({},e,{statusPoints:d.PROGRESS,messagePoints:"Operation in progress..."});case C:return Object(m.a)({},e,{statusPoints:d.SUCCESS,points:t.payload["New Points"],messagePoints:t.payload.message});case S:return Object(m.a)({},e,{statusPoints:d.FAILED,messagePoints:t.payload});case j:return Object(m.a)({},e,{statusPoints:d.STANDBY,messagePoints:b.messagePoints});case R:return Object(m.a)({},e,{history:t.payload});default:return e}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(m.a)({},e,{name:t.payload});case L:return Object(m.a)({},e,{orderBy:t.payload});default:return e}}},M=Object(u.c)(G),Y={products:P,users:b,filters:H},J=Object(u.e)(M,Y,Object(u.d)(Object(u.a)(l.a))),x=(a(62),a(63),a(2)),Q=a(4),z=a(3),X=a(5),Z=(a(64),function(e){var t=function(t){function a(){return Object(p.a)(this,a),Object(Q.a)(this,Object(z.a)(a).apply(this,arguments))}return Object(X.a)(a,t),Object(x.a)(a,[{key:"render",value:function(){return c.a.createElement(e,this.props)}}]),a}(c.a.Component);return Object(i.b)((function(e){return{users:e.users}}),Object(m.a)({},N))(t)}),W=function(e){var t=function(t){function a(){return Object(p.a)(this,a),Object(Q.a)(this,Object(z.a)(a).apply(this,arguments))}return Object(X.a)(a,t),Object(x.a)(a,[{key:"render",value:function(){return c.a.createElement(e,this.props)}}]),a}(c.a.Component);return Object(i.b)((function(e){return{products:e.products}}),Object(m.a)({},F))(t)},K=function(e){var t=function(t){function a(){return Object(p.a)(this,a),Object(Q.a)(this,Object(z.a)(a).apply(this,arguments))}return Object(X.a)(a,t),Object(x.a)(a,[{key:"render",value:function(){return c.a.createElement(e,this.props)}}]),a}(c.a.Component);return Object(i.b)((function(e){return{filters:e.filters}}),Object(m.a)({},w))(t)},V=(a(65),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(Q.a)(this,Object(z.a)(t).call(this,e))).toggle=function(){a.setState({visible:!a.state.visible})},a.state={visible:!1},a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.cost,n=e.category,r=e.img.hdUrl;return c.a.createElement(c.a.Fragment,null,c.a.createElement("article",{className:"aca-product-card",onClick:this.toggle},c.a.createElement("img",{src:r,alt:t,className:"aca-product-image"}),c.a.createElement("p",{className:"aca-product-name"},t),c.a.createElement("section",{className:"aca-product-body"},c.a.createElement("p",null,n),c.a.createElement("p",null,c.a.createElement(oe,null)," ",a))),c.a.createElement(ye,Object.assign({},this.state,{onClose:this.toggle},this.props)))}}]),t}(c.a.Component)),q=(a(66),function(e){function t(){return Object(p.a)(this,t),Object(Q.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.cost,n=e.category,r=e.img.url;return c.a.createElement("article",{className:"aca-product-history-card"},c.a.createElement("img",{src:r,alt:t,className:"aca-product-image"}),c.a.createElement("p",{className:"aca-product-name"},t),c.a.createElement("section",{className:"aca-product-body"},c.a.createElement("p",null,n),c.a.createElement("p",null,c.a.createElement(oe,null)," ",a)))}}]),t}(c.a.Component)),$=a(34),ee=(a(67),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(Q.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).renderProducts=function(e){return e.map((function(e,t){return c.a.createElement(V,Object.assign({key:t},e,{redeemProduct:a.props.redeemProduct}))}))},a.getFilteredProducts=function(e,t){var a=e.name,n=e.orderBy,r=t.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())})),c=n.split("/"),s=Object($.a)(c,2),o=s[0],i=s[1];return r.sort((function(e,t){return e[o]<t[o]&&"ASC"===i?-1:e[o]>t[o]&&"ASC"===i?1:e[o]>t[o]&&"DSC"===i?-1:e[o]<t[o]&&"DSC"===i?1:0}))},a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props,t=e.products,a=e.status,n=e.error,r=e.className,s=e.filters;if(a===d.FAILED)return c.a.createElement("section",{className:"aca-products-grid ".concat(r)},c.a.createElement("p",null,n));var o=this.getFilteredProducts(s,t);return c.a.createElement("section",{className:"aca-products-grid ".concat(r)},this.renderProducts(o))}}]),t}(c.a.Component)),te=n.FiltersHOC(ee),ae=(a(68),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(Q.a)(this,Object(z.a)(t).call(this,e))).toggle=function(){a.setState({visible:!a.state.visible})},a.state={visible:!1},a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props,t=e.username,a=e.points,n=e.history,r=e.status,s=e.error,o=e.className;return r===d.FAILED?c.a.createElement("nav",{className:o},c.a.createElement("p",null,s)):c.a.createElement("nav",{className:o},c.a.createElement(Oe,Object.assign({},this.state,{onClose:this.toggle})),c.a.createElement("section",{className:"aca-users"},c.a.createElement("section",{className:"aca-users-title"},c.a.createElement("h1",null,t||"No user logged"),c.a.createElement("p",{onClick:this.toggle,style:{cursor:"pointer"}},c.a.createElement(oe,null)," ",a)),c.a.createElement(re,{redeemHistory:n})))}}]),t}(c.a.Component)),ne=(a(69),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(Q.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).renderRedeemHistory=function(e){return e.map((function(e,t){return c.a.createElement(q,Object.assign({key:t},e))}))},a.filterDates=function(e){var t={},a=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return e.forEach((function(e){var n=new Date(e.createDate),r="".concat(n.getFullYear()),c="".concat(a[n.getMonth()]),s="".concat(n.getDate());r in t||(t[r]={}),c in t[r]||(t[r][c]={}),s in t[r][c]||(t[r][c][s]=[]),t[r][c][s].push(e)})),t},a.renderDays=function(e,t,n){return Object.keys(e).map((function(r,s){var o=e[r];return c.a.createElement(de,{name:"".concat(n," ").concat(r,", ").concat(t," (").concat(o.length,")"),key:s},a.renderRedeemHistory(o))}))},a.renderMonths=function(e,t){return Object.keys(e).map((function(n,r){var s=e[n];return c.a.createElement(de,{name:n,key:r},a.renderDays(s,t,n))}))},a.renderGroups=function(e){return Object.keys(e).map((function(t,n){var r=e[t];return c.a.createElement(de,{name:t,key:n},a.renderMonths(r,t))}))},a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props.redeemHistory,t=this.filterDates(e||[]);return c.a.createElement("section",{className:"aca-redeem-history"},this.renderGroups(t))}}]),t}(c.a.Component));ne.defaultProps={redeemHistory:[]};var re=ne,ce=a(32),se=a.n(ce),oe=(a(70),function(){return c.a.createElement("img",{src:se.a,alt:"Points",className:"aca-coin-icon"})}),ie=a(19),ue=a.n(ie),le=a(33),me=a.n(le),de=(a(101),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(Q.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).renderBody=function(e){var t=e.onToggle,n=e.setCollapsibleElement;return c.a.createElement("section",{className:"aca-accordion"},c.a.createElement("p",{className:"aca-accordion_name",onClick:t},a.props.name),c.a.createElement("section",{className:"aca-accordion_body",ref:n},a.props.children))},a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return c.a.createElement(me.a,{duration:200,easeCollapse:ue.a.linear,easeExpand:ue.a.linear,render:this.renderBody,bestPerformance:!0,collapsed:!0})}}]),t}(c.a.Component)),pe=(a(102),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(Q.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).renderOptions=function(e){return e.map((function(e,t){return c.a.createElement("option",{value:e.value,key:t},e.label)}))},a.handleChangeName=function(e){var t=e.target.value;a.props.setName(t)},a.handleChangeOrderBy=function(e){var t=e.target.value;a.props.setOrderBy(t)},a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.filters,n=a.orderByOptions,r=a.orderBy,s=a.name;return c.a.createElement("section",{className:"aca-filterbar ".concat(t)},c.a.createElement("input",{onChange:this.handleChangeName,type:"text",name:"name",placeholder:"Name",className:"aca-filterbar_input",value:s}),c.a.createElement("select",{name:"",id:"",value:r,onChange:this.handleChangeOrderBy,className:"aca-filterbar_input"},this.renderOptions(n)))}}]),t}(c.a.Component)),he=n.FiltersHOC(pe),fe=a(14),Ee=a.n(fe),be=(a(104),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(Q.a)(this,Object(z.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;a.setState({amount:t})},a.addPoints=function(){a.props.addPoints(parseInt(a.state.amount))},a.state={amount:"1000"},a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props.visible===e.visible||this.props.visible||this.props.resetMessagePoints()}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onClose,n=e.users,r=n.statusPoints,s=n.messagePoints;return c.a.createElement(Ee.a,{visible:t,onClose:a,height:250},c.a.createElement("h1",null,"Add points to ",n.username),c.a.createElement("section",{className:"aca-modal-options"},c.a.createElement("article",{className:"aca-modal-option"},c.a.createElement("input",{type:"radio",id:"amount_1000",name:"amount",value:"1000",checked:"1000"===this.state.amount,onChange:this.handleChange}),c.a.createElement("label",{htmlFor:"amount_1000"},c.a.createElement(oe,null)," 1000")),c.a.createElement("article",{className:"aca-modal-option"},c.a.createElement("input",{type:"radio",id:"amount_5000",name:"amount",value:"5000",checked:"5000"===this.state.amount,onChange:this.handleChange}),c.a.createElement("label",{htmlFor:"amount_5000"},c.a.createElement(oe,null)," 5000")),c.a.createElement("article",{className:"aca-modal-option"},c.a.createElement("input",{type:"radio",id:"amount_7500",name:"amount",value:"7500",checked:"7500"===this.state.amount,onChange:this.handleChange}),c.a.createElement("label",{htmlFor:"amount_7500"},c.a.createElement(oe,null)," 7500"))),r!==d.STANDBY&&c.a.createElement("p",{className:"aca-modal-message"},s),c.a.createElement("button",{onClick:this.addPoints,className:"aca-modal-button"},"Add ",this.state.amount," points"))}}]),t}(c.a.Component)),Oe=n.UsersHOC(be),ge=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(Q.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).redeemProduct=function(){a.props.redeemProduct(a.props._id)},a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props.visible===e.visible||this.props.visible||this.props.resetMessageRedeem()}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onClose,n=e.products,r=n.statusRedeem,s=n.messageRedeem,o=this.props,i=o.name,u=o.cost,l=o.category,m=o.img.hdUrl;return c.a.createElement(Ee.a,{visible:t,onClose:a,width:330,height:470,customStyles:{width:"auto",height:"auto",top:"auto",left:"auto",right:"50%",bottom:"50%",transform:"translate(50%, 50%)",padding:"1em 2em"}},c.a.createElement("h1",{style:{textAlign:"center"}},i),c.a.createElement("article",{className:"aca-product-card"},c.a.createElement("img",{src:m,alt:i,className:"aca-product-image",style:{width:"auto"}}),c.a.createElement("section",{className:"aca-product-body"},c.a.createElement("p",null,l),c.a.createElement("p",null,c.a.createElement(oe,null)," ",u)),r!==d.STANDBY&&c.a.createElement("p",{className:"aca-product-message"},s)),c.a.createElement("button",{onClick:this.redeemProduct,className:"aca-modal-button"},"Redeem"))}}]),t}(c.a.Component),ye=n.ProductsHOC(ge),ve=function(e){function t(){return Object(p.a)(this,t),Object(Q.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.props.getUser(),this.props.getProducts()}},{key:"render",value:function(){var e=this.props,t=e.products,a=e.users,n=e.addPoints,r=e.redeemProduct;return c.a.createElement("main",{className:"aca-home"},c.a.createElement(ae,Object.assign({},a,{addPoints:n,className:"aca-home-user"})),c.a.createElement(he,{className:"aca-home-filterbar"}),c.a.createElement(te,Object.assign({},t,{redeemProduct:r,className:"aca-home-products"})))}}]),t}(c.a.Component),Ce=n.UsersHOC(n.ProductsHOC(ve));o.a.render(c.a.createElement(i.a,{store:J},c.a.createElement(Ce,null)),document.getElementById("root"))},32:function(e,t,a){e.exports=a.p+"static/media/coin.41527a03.gif"},35:function(e,t,a){e.exports=a(105)},62:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){}},[[35,1,2]]]);
//# sourceMappingURL=main.5fa71b3d.chunk.js.map